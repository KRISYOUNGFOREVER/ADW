# Seedream 4.0 集成测试指南

## 概述

本文档介绍如何测试 Seedream 4.0 模型与 LibLib API 的集成功能。

## 测试环境准备

### 1. 启动开发服务器

```bash
cd frontend
npm run dev
```

### 2. 访问测试页面

- 主应用: http://localhost:3002/
- 测试页面: http://localhost:3002/test
- Seedream页面: http://localhost:3002/seedream

## 测试流程

### 1. 配置测试

访问 http://localhost:3002/test 进行配置测试：

- ✅ 检查 LibLib API 配置状态
- ✅ 验证签名生成功能
- ✅ 确认 Seedream 4.0 模型配置
- ✅ 测试模拟 API 调用

### 2. 界面测试

访问 http://localhost:3002/modules，点击 "Seedream 4.0" 模块：

- ✅ 模块卡片显示正常
- ✅ 点击跳转到 Seedream 页面
- ✅ 页面布局和组件加载正常

### 3. 功能测试

在 Seedream 页面测试生成功能：

#### 模拟模式测试（未配置API密钥）
- ✅ 输入提示词
- ✅ 调整参数（步数、CFG Scale等）
- ✅ 点击生成按钮
- ✅ 显示进度条
- ✅ 生成模拟图片
- ✅ 显示成功消息

#### 真实API测试（已配置API密钥）
- ✅ 配置环境变量
- ✅ 重启服务器
- ✅ 测试真实API调用
- ✅ 轮询生成状态
- ✅ 显示真实生成结果

## API 配置

### 环境变量配置

在前端项目目录（`frontend/`）创建 `.env.local` 文件：

```env
# LibLib API 配置
VITE_LIBLIB_API_KEY=your_api_key_here
VITE_LIBLIB_SECRET_KEY=your_secret_key_here
```

### 获取 API 密钥

1. 访问 [LibLib 官网](https://www.liblib.art/)
2. 注册并登录账户
3. 进入开发者控制台
4. 创建应用并获取 API Key 和 Secret Key

## 测试检查清单

### 基础功能
- [ ] 前端服务器正常启动
- [ ] 页面路由正常工作
- [ ] 组件正常渲染
- [ ] 无控制台错误

### 配置检查
- [ ] LibLib API 配置状态检查
- [ ] 模型配置验证
- [ ] 环境变量读取正常

### 界面交互
- [ ] 参数调整功能正常
- [ ] 文件上传功能正常
- [ ] 生成按钮响应正常
- [ ] 进度显示正常

### API 集成
- [ ] 签名生成正确
- [ ] API 请求格式正确
- [ ] 错误处理正常
- [ ] 状态轮询正常

### 模拟模式
- [ ] 未配置时自动切换模拟模式
- [ ] 模拟进度更新正常
- [ ] 模拟结果显示正常
- [ ] 提示信息准确

## 常见问题

### 1. 页面无法访问
- 检查开发服务器是否正常启动
- 确认端口 3002 未被占用
- 检查防火墙设置

### 2. API 调用失败
- 验证 API 密钥配置
- 检查网络连接
- 查看控制台错误信息

### 3. 组件渲染异常
- 检查依赖包是否完整安装
- 确认 TypeScript 编译无错误
- 查看浏览器开发者工具

### 4. 模拟模式不工作
- 检查 LiblibService.isConfigured() 方法
- 确认模拟逻辑正确执行
- 验证进度更新机制

## 性能测试

### 1. 加载性能
- 页面首次加载时间
- 组件渲染性能
- 资源加载优化

### 2. 交互性能
- 参数调整响应时间
- 生成请求提交速度
- 状态更新流畅度

### 3. 内存使用
- 长时间使用内存泄漏检查
- 大文件上传内存占用
- 多次生成后内存释放

## 部署测试

### 1. 构建测试
```bash
npm run build
```

### 2. 生产环境测试
- 构建产物正常
- 环境变量正确读取
- 静态资源加载正常

## 总结

通过以上测试流程，可以全面验证 Seedream 4.0 模型集成的功能完整性和稳定性。建议在每次代码更新后都进行完整的测试流程，确保功能正常工作。